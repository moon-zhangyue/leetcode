<?php
//ç»™å®šä¸€ä¸ªæ­£æ•´æ•° n ï¼Œä½ å¯ä»¥åšå¦‚ä¸‹æ“ä½œï¼š 
//
// 
// å¦‚æœ n æ˜¯å¶æ•°ï¼Œåˆ™ç”¨ n / 2æ›¿æ¢ n ã€‚ 
// å¦‚æœ n æ˜¯å¥‡æ•°ï¼Œåˆ™å¯ä»¥ç”¨ n + 1æˆ–n - 1æ›¿æ¢ n ã€‚ 
// 
//
// n å˜ä¸º 1 æ‰€éœ€çš„æœ€å°æ›¿æ¢æ¬¡æ•°æ˜¯å¤šå°‘ï¼Ÿ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šn = 8
//è¾“å‡ºï¼š3
//è§£é‡Šï¼š8 -> 4 -> 2 -> 1
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šn = 7
//è¾“å‡ºï¼š4
//è§£é‡Šï¼š7 -> 8 -> 4 -> 2 -> 1
//æˆ– 7 -> 6 -> 3 -> 2 -> 1
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼šn = 4
//è¾“å‡ºï¼š2
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= n <= 2Â³Â¹ - 1 
// 
// Related Topics è´ªå¿ƒ ä½è¿ç®— è®°å¿†åŒ–æœç´¢ åŠ¨æ€è§„åˆ’ ğŸ‘ 152 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
class Solution
{

    /**
     * @param Integer $n
     *
     * @return Integer
     */
    function integerReplacement($n)
    {
        //ä¸€
        if ($n === 1) {
            return 0;
        }

        if ($n % 2 == 0) {
            return 1 + $this->integerReplacement($n / 2);
        } else {
            return 1 + min($this->integerReplacement($n + 1), $this->integerReplacement($n - 1));
        }

        //äºŒ
        /*
         * å½“ n ä¸ºå¶æ•°æ—¶ï¼Œæˆ‘ä»¬åªæœ‰å”¯ä¸€çš„æ–¹æ³•å°† n æ›¿æ¢ä¸º n/2 ï¼›
å½“ n ä¸ºå¥‡æ•°æ—¶ï¼Œn é™¤ä»¥ 4 çš„ä½™æ•°è¦ä¹ˆä¸º 1ï¼Œè¦ä¹ˆä¸º 3ã€‚
å¦‚æœä¸º 1ï¼Œæˆ‘ä»¬å¯ä»¥æ–­å®šï¼Œåº”è¯¥å°† n å˜æˆ (n-1)/2
 ã€‚å¦‚æœæˆ‘ä»¬å¿…é¡»å°† n å˜æˆ (n+1)/2æ‰èƒ½å¾—åˆ°æœ€ä¼˜è§£ï¼Œè€Œ (n+1)/2æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆï¼š
å¦‚æœä¸‹ä¸€æ­¥è¿›è¡Œ -1 å†é™¤ä»¥ 2ï¼Œå¾—åˆ° (n-1)/4ï¼Œé‚£ä¹ˆä»(n-1)/2å¯ä»¥é™¤ä»¥ 2 å¾—åˆ°åŒæ ·çš„ç»“æœï¼›
å¦‚æœä¸‹ä¸€æ­¥è¿›è¡Œ +1 å†é™¤ä»¥ 2ï¼Œå¾—åˆ° (n+3)/4ï¼Œé‚£ä¹ˆä»(n-1)/2ä»¥é™¤ä»¥ 2 å† +1 å¾—åˆ°åŒæ ·çš„ç»“æœã€‚
å› æ­¤å°† n å˜æˆ (n-1)/2æ€»æ˜¯ä¸ä¼šåŠ£äº (n+1)/2ã€‚
å¦‚æœä¸º 3ï¼Œæˆ‘ä»¬å¯ä»¥æ–­å®šï¼Œåº”è¯¥å°† n å˜æˆ (n+1)/2ã€‚å¦‚æœæˆ‘ä»¬å¿…é¡»å°† n å˜æˆ (n-1)/2æ‰èƒ½å¾—åˆ°æœ€ä¼˜è§£ï¼Œè€Œ (n-1)/2æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆï¼š
å¦‚æœä¸‹ä¸€æ­¥è¿›è¡Œ -1 å†é™¤ä»¥ 2ï¼Œå¾—åˆ° (n-3)/4ï¼Œé‚£ä¹ˆä»(n+1)/2å¯ä»¥é™¤ä»¥ 2 å† -1 å¾—åˆ°åŒæ ·çš„ç»“æœã€‚
å¦‚æœä¸‹ä¸€æ­¥è¿›è¡Œ +1 å†é™¤ä»¥ 2ï¼Œå¾—åˆ°(n+1)/4ï¼Œé‚£ä¹ˆä» (n+1)/2å¯ä»¥é™¤ä»¥ 2 å¾—åˆ°åŒæ ·çš„ç»“æœã€‚
å› æ­¤å°† n å˜æˆ(n+1)/2æ€»æ˜¯ä¸ä¼šåŠ£äº(n-1)/2ã€‚ä½†è¿™é‡Œè¿˜éœ€è¦è€ƒè™‘ä¸€ç§ä¾‹å¤–çš„æƒ…å†µï¼Œå¦‚æœ (n-1)/2å·²ç»ä¸º 1ï¼Œå³ n=3æ—¶ï¼Œåç»­å°±æ— éœ€å†è¿›è¡Œä»»ä½•æ“ä½œï¼Œæ­¤æ—¶å°† n å˜æˆ (n-1)/2æ‰æ˜¯æœ€ä¼˜çš„ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¸Šé¢çš„åˆ†ç±»è®¨è®ºï¼Œæ±‚å‡ºå°† n å˜ä¸º 1 çš„æ“ä½œæ¬¡æ•°å³å¯ã€‚
         * */
        $res = 0;

        while ($n !== 1) {
            if ($n % 2 == 0) {
                $n = $n / 2;
            } elseif (($n + 1) % 4 == 0 && $n > 4) {//ä¸èƒ½æ•´é™¤å°±è®¡ç®— $now + 1 æ•´é™¤2 åçš„å€¼èƒ½ä¸èƒ½å†æ¬¡è¢«2 æ•´é™¤(3é™¤å¤–)
                $n = $n + 1;
            } else {
                $n = $n - 1;
            }
            $res++;
        }

        return $res;
    }
}
//leetcode submit region end(Prohibit modification and deletion)
